"function"!=typeof window.CustomEvent&&(window.CustomEvent=function(e,t){t=t||{bubbles:!1,cancelable:!1,detail:null};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}),function(i,d,h){function s(e,t){return typeof e===t}function r(e){var t,n=y.className,a=b._config.classPrefix||"";_&&(n=n.baseVal),b._config.enableJSClass&&(t=new RegExp("(^|\\s)"+a+"no-js(\\s|$)"),n=n.replace(t,"$1"+a+"js$2")),b._config.enableClasses&&(n+=" "+a+e.join(" "+a),_?y.className.baseVal=n:y.className=n)}function p(e){return"function"!=typeof d.createElement?d.createElement(e):_?d.createElementNS.call(d,"http://www.w3.org/2000/svg",e):d.createElement.apply(d,arguments)}function l(e,t){if("object"==typeof e)for(var n in e)j(e,n)&&l(n,e[n]);else{var a=(e=e.toLowerCase()).split("."),o=b[a[0]];if(2==a.length&&(o=o[a[1]]),void 0!==o)return b;t="function"==typeof t?t():t,1==a.length?b[a[0]]=t:(!b[a[0]]||b[a[0]]instanceof Boolean||(b[a[0]]=new Boolean(b[a[0]])),b[a[0]][a[1]]=t),r([(t&&0!=t?"":"no-")+a.join("-")]),b._trigger(e,t)}return b}function o(e,t,n,a){var o,i,r,s="modernizr",l=p("div"),c=((r=d.body)||((r=p(_?"svg":"body")).fake=!0),r);if(parseInt(n,10))for(;n--;)(o=p("div")).id=a?a[n]:s+(n+1),l.appendChild(o);return(r=p("style")).type="text/css",r.id="s"+s,(c.fake?c:l).appendChild(r),c.appendChild(l),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(d.createTextNode(e)),l.id=s,c.fake&&(c.style.background="",c.style.overflow="hidden",i=y.style.overflow,y.style.overflow="hidden",y.appendChild(c)),e=t(l,e),c.fake?(c.parentNode.removeChild(c),y.style.overflow=i,y.offsetHeight):l.parentNode.removeChild(l),!!e}function c(e,t,n){var a,o;for(o in e)if(e[o]in t)return!1===n?e[o]:(a=t[e[o]],s(a,"function")?function(e,t){return function(){return e.apply(t,arguments)}}(a,n||t):a);return!1}function u(e){return e.replace(/([A-Z])/g,function(e,t){return"-"+t.toLowerCase()}).replace(/^ms-/,"-ms-")}function f(e,t){var n=e.length;if("CSS"in i&&"supports"in i.CSS){for(;n--;)if(i.CSS.supports(u(e[n]),t))return!0;return!1}if("CSSSupportsRule"in i){for(var a=[];n--;)a.push("("+u(e[n])+":"+t+")");return o("@supports ("+(a=a.join(" or "))+") { #modernizr { position: absolute; } }",function(e){return"absolute"==(t=e,n=null,a="position","getComputedStyle"in i?(o=getComputedStyle.call(i,t,n),e=i.console,null!==o?a&&(o=o.getPropertyValue(a)):e&&e[e.error?"error":"log"].call(e,"getComputedStyle returning null, its possible modernizr test results are inaccurate")):o=!n&&t.currentStyle&&t.currentStyle[a],o);var t,n,a,o})}return h}function a(e,t,n,a,o){var i=e.charAt(0).toUpperCase()+e.slice(1),r=(e+" "+C.join(i+" ")+i).split(" ");return s(t,"string")||void 0===t?function(e,t,n,a){function o(){r&&(delete I.style,delete I.modElem)}if(a=void 0!==a&&a,void 0!==n){var i=f(e,n);if(void 0!==i)return i}for(var r,s,l,c,d,u=["modernizr","tspan","samp"];!I.style&&u.length;)r=!0,I.modElem=p(u.shift()),I.style=I.modElem.style;for(l=e.length,s=0;s<l;s++)if(c=e[s],d=I.style[c],~(""+c).indexOf("-")&&(c=c.replace(/([a-z])-([a-z])/g,function(e,t,n){return t+n.toUpperCase()}).replace(/^-/,"")),I.style[c]!==h){if(a||void 0===n)return o(),"pfx"!=t||c;try{I.style[c]=n}catch(e){}if(I.style[c]!=d)return o(),"pfx"!=t||c}return o(),!1}(r,t,a,o):c(r=(e+" "+x.join(i+" ")+i).split(" "),t,n)}function t(e,t,n){return a(e,h,h,t,n)}var m=[],v=[],e={_version:"3.6.0",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,t){var n=this;setTimeout(function(){t(n[e])},0)},addTest:function(e,t,n){v.push({name:e,fn:t,options:n})},addAsyncTest:function(e){v.push({name:null,fn:e})}},b=function(){};b.prototype=e,(b=new b).addTest("svg",!!d.createElementNS&&!!d.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect);var g=e._config.usePrefixes?" -webkit- -moz- -o- -ms- ".split(" "):["",""];e._prefixes=g;var n="CSS"in i&&"supports"in i.CSS,w="supportsCSS"in i;b.addTest("supports",n||w);var y=d.documentElement,_="svg"===y.nodeName.toLowerCase();b.addTest("cssgradients",function(){for(var e,t="background-image:",n="",a=0,o=g.length-1;a<o;a++)e=0===a?"to ":"",n+=t+g[a]+"linear-gradient("+e+"left top, #9f9, white);";b._config.usePrefixes&&(n+=t+"-webkit-gradient(linear,left top,right bottom,from(#9f9),to(white));");var i=p("a").style;return i.cssText=n,-1<(""+i.backgroundImage).indexOf("gradient")}),b.addTest("video",function(){var e=p("video"),t=!1;try{(t=!!e.canPlayType)&&((t=new Boolean(t)).ogg=e.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),t.h264=e.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),t.webm=e.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,""),t.vp9=e.canPlayType('video/webm; codecs="vp9"').replace(/^no$/,""),t.hls=e.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(/^no$/,""))}catch(e){}return t}),b.addTest("csspointerevents",function(){var e=p("a").style;return e.cssText="pointer-events:auto","auto"===e.pointerEvents}),b.addTest("placeholder","placeholder"in p("input")&&"placeholder"in p("textarea"));var j,k,w="Moz O ms Webkit",x=e._config.usePrefixes?w.toLowerCase().split(" "):[];e._domPrefixes=x,j=void 0===(k={}.hasOwnProperty)||void 0===k.call?function(e,t){return t in e&&void 0===e.constructor.prototype[t]}:function(e,t){return k.call(e,t)},e._l={},e.on=function(e,t){this._l[e]||(this._l[e]=[]),this._l[e].push(t),b.hasOwnProperty(e)&&setTimeout(function(){b._trigger(e,b[e])},0)},e._trigger=function(e,t){var n;this._l[e]&&(n=this._l[e],setTimeout(function(){for(var e=0;e<n.length;e++)(0,n[e])(t)},0),delete this._l[e])},b._q.push(function(){e.addTest=l});var C=e._config.usePrefixes?w.split(" "):[];e._cssomPrefixes=C;var T,w=(T=i.matchMedia||i.msMatchMedia)?function(e){e=T(e);return e&&e.matches||!1}:function(e){var t=!1;return o("@media "+e+" { #modernizr { position: absolute; } }",function(e){t="absolute"==(i.getComputedStyle?i.getComputedStyle(e,null):e.currentStyle).position}),t};e.mq=w,b.addTest("mediaqueries",w("only all"));var S=e.testStyles=o;b.addTest("touchevents",function(){var t,e;return"ontouchstart"in i||i.DocumentTouch&&d instanceof DocumentTouch?t=!0:(e=["@media (",g.join("touch-enabled),("),"heartz",")","{#modernizr{top:9px;position:absolute}}"].join(""),S(e,function(e){t=9===e.offsetTop})),t});var P={elem:p("modernizr")};b._q.push(function(){delete P.elem});var I={style:P.elem.style};b._q.unshift(function(){delete I.style}),e.testAllProps=a,e.testAllProps=t,b.addTest("cssfilters",function(){if(b.supports)return t("filter","blur(2px)");var e=p("a");return e.style.cssText=g.join("filter:blur(2px); "),!!e.style.length&&(d.documentMode===h||9<d.documentMode)}),function(){var e,t,n,a,o,i,r;for(r in v)if(v.hasOwnProperty(r)){if(e=[],(t=v[r]).name&&(e.push(t.name.toLowerCase()),t.options&&t.options.aliases&&t.options.aliases.length))for(n=0;n<t.options.aliases.length;n++)e.push(t.options.aliases[n].toLowerCase());for(a=s(t.fn,"function")?t.fn():t.fn,o=0;o<e.length;o++)1===(i=e[o].split(".")).length?b[i[0]]=a:(!b[i[0]]||b[i[0]]instanceof Boolean||(b[i[0]]=new Boolean(b[i[0]])),b[i[0]][i[1]]=a),m.push((a?"":"no-")+i.join("-"))}}(),r(m),delete e.addTest,delete e.addAsyncTest;for(var O=0;O<b._q.length;O++)b._q[O]();i.Modernizr=b}(window,document),Modernizr.addTest("itsios",function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}),Modernizr.addTest("itsandroiddefaultbrowser",function(){var e=navigator.userAgent;return-1<e.indexOf("Mozilla/5.0")&&-1<e.indexOf("Android ")&&-1<e.indexOf("AppleWebKit")&&!(-1<e.indexOf("Chrome"))}),jQuery.noConflict(),jQuery(function(e){function n(e){var t=new window.Ill.LightBoxOptions;t.boxClass="privacy-and-terms",t.closeButton=!0,(t=new window.Ill.LightBoxPopup(t)).on("beforeShow",function(){window.Ill.mtHide&&window.Ill.mtHide()}),t.on("beforeClose",function(){window.Ill.mtShow&&window.Ill.mtShow(),window.location.hash=""}),t.show(e)}function t(){var t;o?n(o):(t=new window.Ill.Spinner,e.ajax({url:"/theme/documents/privacy.php"}).done(function(e){o=e,t.hide(),n(e)}).fail(function(){t.hide(),alert("Something went wrong. Please reload the page and try again.")}))}function a(){var t;i?n(i):(t=new window.Ill.Spinner,e.ajax({url:"/theme/documents/terms_of_use.php"}).done(function(e){i=e,t.hide(),n(e)}).fail(function(){t.hide(),alert("Something went wrong. Please reload the page and try again.")}))}var o,i;switch(e("body").on("click",".js-privacy-link",t).on("click",".js-terms-link",a),window.location.hash){case"#terms_of_use":a();break;case"#privacy_policy":t()}}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(h){var t=/\+/g;function p(e){return e}function f(e){return decodeURIComponent(e.replace(t," "))}function m(e){0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return v.json?JSON.parse(e):e}catch(e){}}var v=h.cookie=function(e,t,n){var a,o;if(void 0!==t)return"number"==typeof(n=h.extend({},v.defaults,n)).expires&&(a=n.expires,(o=n.expires=new Date).setDate(o.getDate()+a)),t=v.json?JSON.stringify(t):String(t),document.cookie=[v.raw?e:encodeURIComponent(e),"=",v.raw?t:encodeURIComponent(t),n.expires?"; expires="+n.expires.toUTCString():"",n.path?"; path="+n.path:"",n.domain?"; domain="+n.domain:"",n.secure?"; secure":""].join("");for(var i=v.raw?p:f,r=document.cookie.split("; "),s=e?void 0:{},l=0,c=r.length;l<c;l++){var d=r[l].split("="),u=i(d.shift()),d=i(d.join("="));if(e&&e===u){s=m(d);break}e||(s[u]=m(d))}return s};v.defaults={},h.removeCookie=function(e,t){return void 0!==h.cookie(e)&&(h.cookie(e,"",h.extend(t,{expires:-1})),!0)}}),function(n){var a={};function o(e){if(a[e])return a[e].exports;var t=a[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}o.m=n,o.c=a,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(n,a,function(e){return t[e]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s="QpnE")}({QpnE:function(e,t,n){"use strict";function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}n.r(t);var i=jQuery,n=(n=[{key:"getUnixTimestamp",value:function(){return Math.floor(+new Date/1e3)}},{key:"dateFormat",value:function(e){return e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+" "+t(e.getUTCHours())+":00:00";function t(e){e=""+e;return 1==e.length&&(e="0"+e),e}}}],a((t=r).prototype,[{key:"init",value:function(){var n=this;clearTimeout(this.timeTrackingTimerId),this.saveInProgress=!1,i.getJSON("/learningcenter/account/serverTimestamp").then(function(e){if(!e.server_timestamp||!e.member_id)return console.warn(e),i.Deferred().reject("Incorrect server answer");n.memberId=e.member_id;var t=n.getTimeStatistic();return t&&t.server_timestamp||(n.setTimeStatistic({server_timestamp:e.server_timestamp,offset:r.getUnixTimestamp()-e.server_timestamp}),t=n.getTimeStatistic()),t&&t.server_timestamp?t:i.Deferred().reject("Time tracking is not working because data cannot be saved")}).then(function(e){n.saveTimeStatistic(e,!0),function e(){n.onTick(),n.timeTrackingTimerId=setTimeout(e,1e3)}()}).fail(console.warn)}},{key:"onTick",value:function(){var e,t;(document.hasFocus()||i("iframe:focus").length||this.isPlayerInUse())&&!this.saveInProgress&&(t=r.getUnixTimestamp(),(e=parseInt(localStorage.getItem("ill-time-tracking.lastTick")))&&e==t||(localStorage.setItem("ill-time-tracking.lastTick",""+t),(e=this.getTimeStatistic())?(t=new Date(1e3*(t-e.offset)),t=r.dateFormat(t),e.hourly_passed_time[t]||(e.hourly_passed_time[t]=0),e.hourly_passed_time[t]++,this.setTimeStatistic(e),this.saveTimeStatistic(e)):this.init()))}},{key:"saveTimeStatistic",value:function(n,e){var a=this;if(n){var t,o=0;for(t in n.hourly_passed_time)o+=+n.hourly_passed_time[t];!e&&o<this.cumulativeSaveTimeout||!o||((e=new FormData).append("server_timestamp",n.server_timestamp),e.append("hourly_passed_time",JSON.stringify(n.hourly_passed_time)),e.append("member_id",this.memberId),this.saveInProgress=!0,i.ajax({url:"/learningcenter/account/savePassedTime",data:e,processData:!1,contentType:!1,dataType:"json",type:"POST"}).then(function(e){if(e.member_id&&e.member_id==a.memberId||a.init(),!e.server_timestamp)return console.warn(e),i.Deferred().reject("Empty server_timestamp");var t=a.getTimeStatistic();n.server_timestamp==t.server_timestamp&&(a.setTimeStatistic({server_timestamp:e.server_timestamp,offset:r.getUnixTimestamp()-e.server_timestamp}),a.cumulativeSaveTimeout=900,a.saveInProgress=!1)}).fail(function(e){console.warn(e),a.cumulativeSaveTimeout=o+900,a.saveInProgress=!1}))}}},{key:"onStartPlayer",value:function(n){var a=this;this.playerTimestampUpdaters[n]||function e(){var t=a.getPlayers();(t=t||{})[n]=+new Date,a.setPlayers(t),a.playerTimestampUpdaters[n]=setTimeout(e,1e3)}()}},{key:"onStopPlayer",value:function(e){clearTimeout(this.playerTimestampUpdaters[e]),delete this.playerTimestampUpdaters[e];var t=this.getPlayers();t&&(delete t[e],this.setPlayers(t))}},{key:"isPlayerInUse",value:function(){var e=this.getPlayers();if(!e)return!1;var t,n,a=+new Date;for(n in e)3e3<a-parseInt(e[n])?delete e[n]:t=!0;return this.setPlayers(e),t}},{key:"getPlayers",value:function(){var t;try{t=JSON.parse(localStorage.getItem("ill-time-tracking.players."+this.memberId))}catch(e){console.warn(e),t=null}return t}},{key:"setPlayers",value:function(e){localStorage.setItem("ill-time-tracking.players."+this.memberId,JSON.stringify(e))}},{key:"getTimeStatistic",value:function(){if(!this.memberId||!localStorage)return null;try{return JSON.parse(localStorage.getItem("ill-time-tracking.timeTracking."+this.memberId))}catch(e){return console.warn(e),null}}},{key:"setTimeStatistic",value:function(e){localStorage&&(this.memberId&&e&&e.server_timestamp?(e.offset||(e.offset=0),e.hourly_passed_time||(e.hourly_passed_time={}),localStorage.setItem("ill-time-tracking.timeTracking."+this.memberId,JSON.stringify(e))):r.init())}}]),a(t,n),r);function r(){!function(e){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this),this.cumulativeSaveTimeout=900,this.saveInProgress=!1,this.playerTimestampUpdaters={},this.timeTrackingTimerId=null,this.memberId=null,this.init()}window.illTimeTracking=new n}}),function(n){var a={};function o(e){if(a[e])return a[e].exports;var t=a[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}o.m=n,o.c=a,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(n,a,function(e){return t[e]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s="lQiN")}({lQiN:function(e,t){document.addEventListener("DOMContentLoaded",function(){for(var e=document.querySelectorAll(".js-banner-click-handler"),t=0;t<e.length;t++){var n=e[t];if(n.hasAttribute("data-promotion")){if(!n.parentElement)return;if("none"===window.getComputedStyle(n.parentElement).getPropertyValue("display"))return;var a=n.getAttribute("data-promotion");try{var o=JSON.parse(a);window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"promotionView",ecommerce:{promoView:{promotions:[o]}}}),n.addEventListener("click",function(a){!function(){var e=a.currentTarget;if(e.hasAttribute("data-promotion")){var t=e.getAttribute("data-promotion");try{var n=JSON.parse(t);window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"promotionClick",ecommerce:{promoClick:{promotions:[n]}}})}catch(e){}}}()})}catch(e){}}}})}}),function(n){var a={};function o(e){if(a[e])return a[e].exports;var t=a[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}o.m=n,o.c=a,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(n,a,function(e){return t[e]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s="0I7d")}({"0I7d":function(e,t){var n,a,o,i,r=document.documentElement,s=r.dataset.fontId;s&&(n={kitId:s,scriptTimeout:3e3,async:!0},r.className+=" wf-loading",a=setTimeout(function(){r.className=r.className.replace(/\bwf-loading\b/g,"")+" wf-inactive"},n.scriptTimeout),o=!1,(i=document.createElement("script")).src="https://use.typekit.net/"+n.kitId+".js",i.async=!0,i.onload=i.onreadystatechange=function(){var e=this.readyState;if(!(o||e&&"complete"!=e&&"loaded"!=e)){o=!0,clearTimeout(a);try{window.Typekit.load(n)}catch(e){}}},(s=document.getElementsByTagName("script")[0]).parentNode.insertBefore(i,s))}}),function(n){var a={};function o(e){if(a[e])return a[e].exports;var t=a[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}o.m=n,o.c=a,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(n,a,function(e){return t[e]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s="2s62")}({"2s62":function(e,t,n){"use strict";n.r(t);var m=n("FfI3"),v=n("4m+o"),b=jQuery;b(function(){var t=0,d={},u={};b(".js-dashbar-search-string").keyup(function(e){var c;13!=e.which&&(c=(c=jQuery.trim(jQuery(this).val())).replace(new RegExp("[*\\/\"'$`~%^<>;]","g"),""),d[c]||u[c]?(jQuery(".js-dashbar-search-result-lessons").html(d[c]),jQuery(".js-dashbar-search-result-dictionary").html(u[c]),jQuery(".js-dashbar-search-results a").attr("tabindex","-1"),jQuery(".js-dashbar-search-results").show(),jQuery(".js-dashbar-advanced-search").attr("href","/search/"+c.replace(" ","+")),jQuery(".js-dashbar-dictionary-results").attr("href","/learningcenter/reference/dictionary/"+c.replace(" ","+"))):(clearTimeout(t),c?t=setTimeout(function(e){jQuery.getJSON("/livesearch/backend.php?ss="+encodeURIComponent(c),function(e){var t,n="",a="";for(t in e){var o=(o=c.replace("&","&amp;")).replace(/[\(\)\[\]\+\?\\]/g,"\\$&");if("Lessons"===e[t].title&&e[t].data&&e[t].data.length)for(var i in e[t].data){var r=e[t].data[i];r.result&&(n+="<li>"+r.result.replace(new RegExp("(>[^<]*?)("+o+")","gi"),"$1<strong>$2</strong>")+"</li>")}if("Dictionary"===e[t].title&&e[t].data&&e[t].data.length)for(var s in e[t].data){var l=e[t].data[s];l.result&&(a+="<li>"+l.result.replace(new RegExp("(>[^<]*?)("+o+")","gi"),"$1<strong>$2</strong>").replace('class="s_dic"',"")+"</li>")}}n=n||'<li class="dashbar-a__label--no-results">No Results</li>',d[c]=n,jQuery(".js-dashbar-search-result-lessons").html(n),a=a||'<li class="dashbar-a__label--no-results">No results</li>',u[c]=a,jQuery(".js-dashbar-search-result-dictionary").html(a),jQuery(".js-dashbar-advanced-search").attr("href","/search/"+c.replace(" ","+")),jQuery(".js-dashbar-dictionary-results").attr("href","/learningcenter/reference/dictionary/"+c.replace(" ","+")),jQuery(".js-dashbar-search-results a").attr("tabindex","-1"),jQuery(".js-dashbar-search-results").show()})},100):jQuery(".js-dashbar-search-results").hide()))}),b("body").bind("click",function(e){b(e.target).closest(".dashbar-a").length||(s.attr("aria-expanded","false"),l.attr("aria-expanded","false"),c.attr("aria-expanded","false"),h.attr("aria-expanded","false"),b(".js-dashbar-a-nav").removeClass("dashbar-a__expanded"))}),/iPhone|iPad|iPod/i.test(navigator.userAgent)&&jQuery("body").bind("touchstart",function(e){jQuery(e.target).is(".dashbar-a__nav-item:not(.js-dashbar-a-touch-exception), .dashbar-a__nav-icon, .dashbard-a__profile")&&(e.preventDefault(),e.stopImmediatePropagation())}),/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||(jQuery(".dashbar-a__block--sign-in").mouseenter(function(){jQuery(this).addClass("dashbar-active-block")}),jQuery(".dashbar-a__block--sign-in").mouseleave(function(e){(e.relatedTarget||e.pageY-jQuery(document).scrollTop()<15)&&jQuery(this).removeClass("dashbar-active-block").find("input").blur()}));function n(e){return!(isNaN(e)||e==s.length||e<0||(s.eq(e).focus(),i=e,r=0))}function a(e,t){return e=b(e).find("a:visible, input:visible, button:visible"),!(t<0||t>=e.length||!e.length||(e.eq(t).focus(),r=t,0))}function o(e){"false"==b(e).attr("aria-expanded")||null==b(e).attr("aria-expanded")?b(e).attr("aria-expanded","true"):b(e).attr("aria-expanded","false")}var i,r,s=b(".js-dashbar-a-tabindex"),l=b(".js-dashbar-a-search-item"),c=b(".js-dashbar-a-profileitem"),h=b(".js-dashbar-a-upgradeitem"),e=b(".js-dashbar-a-nav-item a, .js-dashbar-a-nav-item input, .js-dashbar-a-nav-item button");e.attr("tabindex","-1"),b(s).focus(function(){i=s.index(this)}),b(s).add(l).add(c).add(h).focus(function(){s.attr("aria-expanded","false"),l.attr("aria-expanded","false"),c.attr("aria-expanded","false"),h.attr("aria-expanded","false"),b(".js-dashbar-a-nav").removeClass("dashbar-a__expanded")}),s.keydown(function(e){switch(e.which){case v.a.right:return n(i+1),e.preventDefault(),e.stopPropagation(),!1;case v.a.left:return n(i-1),e.preventDefault(),e.stopPropagation(),!1;case v.a.up:return e.preventDefault(),e.stopPropagation(),!1;case v.a.enter:case v.a.space:case v.a.down:s.eq(i).closest(".js-dashbar-a-nav").addClass("dashbar-a__expanded"),o(this);var t=s.eq(i).closest(".js-dashbar-a-nav").find(".js-dashbar-a-nav-item");if(t.length)return a(t.get(0),0),e.preventDefault(),e.stopPropagation(),!1}}),e.keydown(function(e){switch(e.which){case v.a.down:return a(b(this).closest(".js-dashbar-a-nav").find(".js-dashbar-a-nav-item").get(0),r+1)||n(i+1),e.preventDefault(),e.stopPropagation(),!1;case v.a.up:return a(b(this).closest(".js-dashbar-a-nav").find(".js-dashbar-a-nav-item").get(0),r-1)||n(i),e.preventDefault(),e.stopPropagation(),!1;case v.a.right:return n(i+1),e.preventDefault(),e.stopPropagation(),!1;case v.a.left:return n(i-1),e.preventDefault(),e.stopPropagation(),!1;case v.a.esc:return b(this).closest(".js-dashbar-a-nav").hasClass("dashbar-a__expanded")&&(o(s.eq(i).get(0)),n(i)),e.preventDefault(),e.stopPropagation(),!1}}),l.keydown(function(e){switch(e.which){case v.a.down:case v.a.space:case v.a.enter:return b(this).closest(".js-dashbar-a-nav").addClass("dashbar-a__expanded"),o(this),b(this).closest(".js-dashbar-a-nav").find(".js-dashbar-search-string").focus(),e.preventDefault(),e.stopPropagation(),!1}}),b(document).delegate(".js-dashbar-search-string, .js-dashbar-search-results a","keydown",function(e){switch(e.which){case v.a.esc:return l.focus(),e.preventDefault(),e.stopPropagation(),!1;case v.a.down:return(t=b(this).index(".js-dashbar-search-string, .js-dashbar-search-results a"))+1<b(".js-dashbar-search-string, .js-dashbar-search-results a").length&&b(".js-dashbar-search-string, .js-dashbar-search-results a").eq(t+1).focus(),e.preventDefault(),e.stopPropagation(),!1;case v.a.up:var t;return 0<=(t=b(this).index(".js-dashbar-search-string, .js-dashbar-search-results a"))-1?b(".js-dashbar-search-string, .js-dashbar-search-results a").eq(t-1).focus():0==t&&(o(l.get(0)),l.focus()),e.preventDefault(),e.stopPropagation(),!1}}),c.keydown(function(e){switch(e.which){case v.a.down:case v.a.space:case v.a.enter:return b(this).closest(".js-dashbar-a-nav").addClass("dashbar-a__expanded"),o(this),b(this).closest(".js-dashbar-a-nav").find(".dashbar-profile a:first").focus(),e.preventDefault(),e.stopPropagation(),!1}}),b(".dashbar-profile a").keydown(function(e){switch(e.which){case v.a.esc:return c.focus(),e.preventDefault(),e.stopPropagation(),!1;case v.a.down:return(t=b(this).index(".dashbar-profile a"))+1<b(".dashbar-profile a").length&&b(".dashbar-profile a").eq(t+1).focus(),e.preventDefault(),e.stopPropagation(),!1;case v.a.up:var t;return 0<=(t=b(this).index(".dashbar-profile a"))-1?b(".dashbar-profile a").eq(t-1).focus():0==t&&(o(c.get(0)),c.focus()),e.preventDefault(),e.stopPropagation(),!1}});var p=h.data("test-view-event");h.is(":visible")&&p&&window.trackEvent(p),h.keydown(function(e){h.attr("href")||-1===[v.a.down,v.a.space,v.a.enter].indexOf(e.which)||(b(this).closest(".js-dashbar-a-nav").addClass("dashbar-a__expanded"),o(this),b(this).closest(".js-dashbar-a-nav").find(".js-dashbar-a-pick-a-plan a:first").focus(),e.preventDefault(),e.stopPropagation(),(e=b(this).data("test-event"))&&window.trackEvent(e))}),h.on("hover",function(){var e=b(this).data("test-event");e&&window.trackEvent(e)});var f=b(".js-dashbar-a-countdown-box");f.length&&((p=new m.a(".js-dashbar-a-countdown",f.data("end-ts"))).onEnd(function(){f.hide()}),p.start()),b(".js-dashbar-a-pick-a-plan a").keydown(function(e){switch(e.which){case v.a.esc:return h.focus(),h.attr("aria-expanded","false"),h.closest(".js-dashbar-a-nav").removeClass("dashbar-a__expanded"),e.preventDefault(),e.stopPropagation(),!1;case v.a.down:return(t=b(this).index(".js-dashbar-a-pick-a-plan a"))+1<b(".js-dashbar-a-pick-a-plan a").length&&b(".js-dashbar-a-pick-a-plan a").eq(t+1).focus(),e.preventDefault(),e.stopPropagation(),!1;case v.a.up:var t;return 0<=(t=b(this).index(".js-dashbar-a-pick-a-plan a"))-1?b(".js-dashbar-a-pick-a-plan a").eq(t-1).focus():0==t&&(o(h.get(0)),h.focus()),e.preventDefault(),e.stopPropagation(),!1}}),e.focusout(function(e){e.relatedTarget&&!b(e.relatedTarget).closest(".js-dashbar-a-nav").length&&b(this).closest(".js-dashbar-a-nav").removeClass("dashbar-a__expanded")}),b(document).delegate(".js-dashbar-search-string, .js-dashbar-search-results a","focusout",function(e){e.relatedTarget&&!b(e.relatedTarget).closest(".js-dashbar-a-nav").length&&b(this).closest(".js-dashbar-a-nav").removeClass("dashbar-a__expanded")}),b(".dashbar-profile a").focusout(function(e){e.relatedTarget&&!b(e.relatedTarget).closest(".js-dashbar-a-nav").length&&b(this).closest(".js-dashbar-a-nav").removeClass("dashbar-a__expanded")}),b(".js-dashbar-a-pick-a-plan a").focusout(function(){event.relatedTarget&&!b(event.relatedTarget).closest(".js-dashbar-a-nav").length&&b(this).closest(".js-dashbar-a-nav").removeClass("dashbar-a__expanded")}),b(".dashbar-sign-in form").focusout(function(){event.relatedTarget&&!b(event.relatedTarget).closest(".js-dashbar-a-nav").length&&b(this).closest(".js-dashbar-a-nav").removeClass("dashbar-a__expanded")}),document.addEventListener("ill.assignment.complete",function(e){var t;e.detail&&e.detail.assignmentId&&(t=b(".js-dashbar-assignment-notification"),e=parseInt(t.eq(0).text(),10)-1,t.text(e),e||t.hide())}),document.addEventListener("ill.assignment.retake",function(e){var t;e.detail&&e.detail.assignmentId&&(t=b(".js-dashbar-assignment-notification"),e=parseInt(t.eq(0).text(),10)+1,t.text(e).show())})})},"4m+o":function(e,t,n){"use strict";t.a={tab:9,enter:13,esc:27,space:32,left:37,up:38,right:39,down:40}},FfI3:function(e,t,n){"use strict";function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}n.d(t,"a",function(){return o});var o=(a(i.prototype,[{key:"updateTimer",value:function(){var e,t,n,a,o,i=this;this.isWorking&&(e=jQuery(this.selector),o=new Date,this.endTimestamp?a=new Date(1e3*this.endTimestamp):(a=new Date).setHours(23,59,59),t=(a-o)/1e3,n=Math.floor(t%86400/3600),a=Math.floor(t%3600/60),o=Math.floor(t%60),e.text("".concat(n,"h ").concat(a<10?"0":"").concat(a,"m ").concat(o<10?"0":"").concat(o,"s")),this.endTimestamp&&t<=0?(this.stop(),"function"==typeof this.onEndCallback&&this.onEndCallback()):this.timerId=setTimeout(function(){i.updateTimer()},1e3))}},{key:"stop",value:function(){this.isWorking&&(this.isWorking=!1,clearTimeout(this.timerId))}},{key:"start",value:function(){this.isWorking||(this.isWorking=!0,this.updateTimer())}},{key:"onEnd",value:function(e){this.onEndCallback=e}}]),i);function i(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;(function(e){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")})(this),this.selector=e,this.timerId=0,this.isWorking=!1,this.endTimestamp=t}}}),jQuery(function(n){function a(){u=!u,c.toggleClass("dashbar-r-visible",u),n(this).attr("aria-expanded",u),c.attr("aria-hidden",!u)}var o=n(".js-dashbar_r-wrap"),e=n(".js-dashbar_r-overlay"),t=n(".js-dashbar_r-menu"),i=n("body"),r=n(".js-dashbar_r-menu-slider"),s=n(".js-dashbar_r-level-a"),l=null,c=n(".js-dashbar_r-profile-menu"),d=n(".js-dashbar_r-open-menu"),u=!1;n(".js-dashbar_r-open-profile-menu").click(a),d.click(function(){o.addClass("dashbar-r-visible"),t.addClass("dashbar-r-visible"),e.addClass("dashbar-r-visible"),i.addClass("dashbar-r__fixed"),n(this).attr("aria-expanded",!0),t.find("button, a").filter(":first").focus()}),n(".js-dahbar_r-branch").click(function(){var e=n(this).data("branch");e&&(e=n(".js-dashbar_r-branch-"+(l=e)),r.one("transitionend webkitTransitionEnd oTransitionEnd",function(){e.find("button, a").filter(":first").focus()}),e.addClass("dashbar-r-visible"),e.attr("aria-hidden",!1),s.attr("aria-hidden",!0),r.addClass("dashbar-r-level-b"))});function h(){var e;l&&((e=n(".js-dashbar_r-branch-"+l)).removeClass("dashbar-r-visible"),r.removeClass("dashbar-r-level-b"),e.attr("aria-hidden",!0),s.attr("aria-hidden",!1),t.find(".js-dahbar_r-branch").each(function(e,t){t=n(t),console.log(e,l,t,t.data("branch")),l&&t.data("branch")===l&&(t.focus(),l=null)}))}n(".js-dashbar_r-close-branch").click(h);function p(){t.one("transitionend webkitTransitionEnd oTransitionEnd",function(){h(),c.removeClass("dashbar-r-visible")}),t.removeClass("dashbar-r-visible"),e.removeClass("dashbar-r-visible"),o.removeClass("dashbar-r-visible"),i.removeClass("dashbar-r__fixed"),d.attr("aria-expanded",!1).focus()}e.click(p),e.focus(function(){});var f=9,m=27;n(document).delegate(".js-dashbar_r-wrap","keydown",function(e){switch(e.which){case m:(l?h:u?a:p)(),e.preventDefault(),e.stopPropagation();break;case f:var t=o.find("a:visible, button:visible");e.shiftKey?t.filter(":first").is(":focus")&&(t.filter(":last").focus(),e.preventDefault(),e.stopPropagation()):t.filter(":last").is(":focus")&&(t.filter(":first").focus(),e.preventDefault(),e.stopPropagation())}})});var Mailcheck={domainThreshold:2,secondLevelThreshold:2,topLevelThreshold:2,defaultDomains:["yahoo.com","google.com","hotmail.com","gmail.com","me.com","aol.com","mac.com","live.com","comcast.net","googlemail.com","msn.com","hotmail.co.uk","yahoo.co.uk","facebook.com","verizon.net","sbcglobal.net","att.net","gmx.com","outlook.com","icloud.com","bellsouth.net","optonline.net","yandex.ru","mail.ru","yandex.com","qq.com","live.co.uk"],defaultSecondLevelDomains:["yahoo","hotmail","live","outlook","gmx","yandex"],defaultTopLevelDomains:["com","net","co.uk","ru","fr","de","edu","ca","com.au","it","org","pl","co.jp","com.br","es","nl","cz","com.sg","co.in","com.vn","com.hk","bg","com.ph","com.tw","hu","co.id","se","ch","com.mx","net.au","co.nz","no","gr","dk","lv","be","in","at","ac.uk","co.za","cn","ne.jp","ie","com.my","eu","com.cn","us","fi","jp","co.th","com.ar","info","sk","edu.au","ua","com.tr","me","pt","co.kr","fm","ocn.ne","co.il","ro","org.uk"],run:function(e){e.domains=e.domains||Mailcheck.defaultDomains,e.secondLevelDomains=e.secondLevelDomains||Mailcheck.defaultSecondLevelDomains,e.topLevelDomains=e.topLevelDomains||Mailcheck.defaultTopLevelDomains,e.distanceFunction=e.distanceFunction||Mailcheck.sift4Distance;var t=function(e){return e},n=e.suggested||t,t=e.empty||t,e=Mailcheck.suggest(Mailcheck.encodeEmail(e.email),e.domains,e.secondLevelDomains,e.topLevelDomains,e.distanceFunction);return e?n(e):t()},suggest:function(e,t,n,a,o){e=e.toLowerCase();e=this.splitEmail(e);if(n&&a&&-1!==n.indexOf(e.secondLevelDomain)&&-1!==a.indexOf(e.topLevelDomain))return!1;t=this.findClosestDomain(e.domain,t,o,this.domainThreshold);if(t)return t!=e.domain&&{address:e.address,domain:t,full:e.address+"@"+t};n=this.findClosestDomain(e.secondLevelDomain,n,o,this.secondLevelThreshold),a=this.findClosestDomain(e.topLevelDomain,a,o,this.topLevelThreshold);if(e.domain){t=e.domain;o=!1;if(n&&n!=e.secondLevelDomain&&(t=t.replace(e.secondLevelDomain,n),o=!0),a&&a!=e.topLevelDomain&&""!==e.secondLevelDomain&&(t=t.replace(new RegExp(e.topLevelDomain+"$"),a),o=!0),o)return{address:e.address,domain:t,full:e.address+"@"+t}}return!1},findClosestDomain:function(e,t,n,a){var o;a=a||this.topLevelThreshold;var i=1/0,r=null;if(!e||!t)return!1;n=n||this.sift4Distance;for(var s=0;s<t.length;s++){if(e===t[s])return e;(o=n(e,t[s]))<i&&(i=o,r=t[s])}return i<=a&&null!==r&&r},sift4Distance:function(e,t,n){if(void 0===n&&(n=5),!e||!e.length)return t?t.length:0;if(!t||!t.length)return e.length;for(var a=e.length,o=t.length,i=0,r=0,s=0,l=0,c=0,d=[];i<a&&r<o;){if(e.charAt(i)==t.charAt(r)){l++;for(var u=!1,h=0;h<d.length;){var p=d[h];if(i<=p.c1||r<=p.c2){(u=Math.abs(r-i)>=Math.abs(p.c2-p.c1))?c++:p.trans||(p.trans=!0,c++);break}i>p.c2&&r>p.c1?d.splice(h,1):h++}d.push({c1:i,c2:r,trans:u})}else{s+=l,l=0,i!=r&&(i=r=Math.min(i,r));for(var f=0;f<n&&(i+f<a||r+f<o);f++){if(i+f<a&&e.charAt(i+f)==t.charAt(r)){i+=f-1,r--;break}if(r+f<o&&e.charAt(i)==t.charAt(r+f)){i--,r+=f-1;break}}}r++,(a<=++i||o<=r)&&(s+=l,l=0,i=r=Math.min(i,r))}return s+=l,Math.round(Math.max(a,o)-s+c)},splitEmail:function(e){var t=(e=null!==e?e.replace(/^\s*/,"").replace(/\s*$/,""):null).split("@");if(t.length<2)return!1;for(var n=0;n<t.length;n++)if(""===t[n])return!1;var a=t.pop(),o=a.split("."),e="",i="";if(0===o.length)return!1;if(1==o.length)i=o[0];else{e=o[0];for(var r=1;r<o.length;r++)i+=o[r]+".";i=i.substring(0,i.length-1)}return{topLevelDomain:i,secondLevelDomain:e,domain:a,address:t.join("@")}},encodeEmail:function(e){return encodeURI(e).replace("%20"," ").replace("%25","%").replace("%5E","^").replace("%60","`").replace("%7B","{").replace("%7C","|").replace("%7D","}")}};"undefined"!=typeof module&&module.exports&&(module.exports=Mailcheck),"function"==typeof define&&define.amd&&define("mailcheck",[],function(){return Mailcheck}),"undefined"!=typeof window&&window.jQuery&&(jQuery.fn.mailcheck=function(e){var t,n,a=this;e.suggested&&(t=e.suggested,e.suggested=function(e){t(a,e)}),e.empty&&(n=e.empty,e.empty=function(){n.call(null,a)}),e.email=this.val(),Mailcheck.run(e)}),function(o){o(document).on("submit",".js-fla form",function(){var t=o(this).find("input[type=submit],button[type=submit]");t.prop("disabled",!0);var n=o(this).find("input[type=email]").val();if(-1===n.indexOf("@"))return alert("Please enter a valid email address."),t.prop("disabled",!1),!1;if(""==o(this).find("select").val())return alert("Please select your level"),t.prop("disabled",!1),!1;var a=!0;return Mailcheck&&Mailcheck.run({email:n,suggested:function(e){confirm("Please check your spelling! Did you really mean: "+n+"? Click 'Cancel' to fix or 'OK' to submit.")?a=!0:(a=!1,t.prop("disabled",!1))},empty:function(){a=!0}}),a}),o(document).on("keypress",".js-fla form",function(e){if(13==e.which)return e.preventDefault(),o(this).submit(),!1})}(jQuery),function(n){var a={};function o(e){if(a[e])return a[e].exports;var t=a[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}o.m=n,o.c=a,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(n,a,function(e){return t[e]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s="kK63")}({kK63:function(e,t,n){"use strict";n.r(t);var a=function(){this.boxClass=null,this.closeButton=!1,this.lock=!1,this.closeButtonTabIndex=0,this.closeButtonClass="r101-close-button--b",this.autoAlign=!0,this.additionalControls=null,this.validateFunc=function(){return!0}};function o(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var s=jQuery,i=(o(r.prototype,[{key:"_initialize",value:function(){var t=this;this._overlay=s("<div></div>"),this._overlay.addClass("lightBox-overlay"),s("body").append(this._overlay),this._box=s("<div></div>"),this._box.addClass("lightBox-box"),this._box.attr("aria-hidden",!0),this._overlay.append(this._box),"string"==typeof this._options.boxClass&&this._box.addClass(this._options.boxClass),this._overlay.on("click.".concat(this._namespace),function(e){e.target==e.currentTarget&&(t._locked||t.close(),e.stopPropagation())}),!1!==this._options.autoAlign&&s(window).on("resize.".concat(this._namespace),function(){t.align()})}},{key:"show",value:function(e){var t=this;if(s.isReady){this._initialize(),this._box.empty().append(e);var n=[];this._options.additionalControls&&("string"==typeof this._options.additionalControls?n.push(this._options.additionalControls):n=this._options.additionalControls),this._options.closeButton&&((r=s("<button></button>")).addClass("js-lightbox-close"),"string"==typeof this._options.closeButtonClass?r.addClass(this._options.closeButtonClass):r.addClass("r101-close-button--b"),r.attr("tabindex",this._options.closeButtonTabIndex||0),r.attr("aria-label","Close"),r.attr("role","button"),n.push(r));var a=s("<div></div>").addClass("lightBox-controls");this._box.append(a);for(var o=0;o<n.length;o++){var i=s("<div></div>").addClass("lightBox-control");i.append(n[o]),a.append(i)}var r=this._box.find(".js-lightbox-close");r.length&&(r.on("click.".concat(this._namespace),function(){t.close()}),r.on("keydown.".concat(this._namespace),function(e){if(13==e.which)return t.close(),e.preventDefault(),e.stopPropagation(),!1})),s(window).on("keydown.".concat(this._namespace),function(e){if(t._visible&&27==e.which)return t._locked||t.close(),e.preventDefault(),e.stopPropagation(),!1}),window.Ill.LightBoxController.lockAllExcept(this),this._fireEvent("beforeShow"),this._visible||(this._lastFocus=s(document.activeElement)||s(":focus"),this._docElements=this._hideTabindex(this._box)),this._visible=!0,this._showOverlay(500),this._showBox(800,function(){t._box.attr("aria-hidden",!1),t._setFocus(),t._fireEvent("onShow")})}else s(document).ready(function(){t.show(e)})}},{key:"close",value:function(){var e=this;this._visible&&this._options.validateFunc(this._box,this)&&(this._fireEvent("beforeClose"),this._hideBox(500),this._hideOverlay(800,function(){e._visible=!1,e._fireEvent("onClose"),e._overlay.remove()}),window.Ill.LightBoxController.revert(this),this._restoreTabindex(this._docElements),this._lastFocus.length&&this._setFocus(this._lastFocus),s(window).off("keydown.".concat(this._namespace)))}},{key:"_hideTabindex",value:function(e){var t=s("input,select,textarea,button,object,*[href],*[tabindex],area").filter(function(){return!s(this).closest(e).length&&-1!=s(this).attr("tabindex")});return t.each(function(){this.hasAttribute("tabindex")&&s(this).data("tabindex",s(this).attr("tabindex")),s(this).attr("tabindex","-1")}),t}},{key:"_restoreTabindex",value:function(e){e.each(function(){void 0!==s(this).data("tabindex")?(s(this).attr("tabindex",s(this).data("tabindex")),s(this).removeData("tabindex")):s(this).removeAttr("tabindex")})}},{key:"_setFocus",value:function(e){e&&0!==e.length||0===(e=this._box.find('[role="dialog"], [role="alertdialog"]').first()).length&&(e=this._box.attr("role","dialog")),e.is("body")||s(".lightBox-overlay").hasClass("no-popup")||(void 0===e.attr("tabindex")&&e.attr("tabindex",0),e.focus())}},{key:"_showOverlay",value:function(e,t){this._overlay.fadeIn(e||500,t),window.Ill.LightBoxController.amIAlone(this)&&(s("html, body").addClass("lightBox-body"),s(document).height()>s(window).height()&&!s(".lightBox-overlay").hasClass("no-popup"))&&(t=(s("html").scrollTop()?s("html"):s("body")).scrollTop(),s("html").addClass("noscroll").css("top",-t))}},{key:"_hideOverlay",value:function(e,t){this._overlay.fadeOut(e||500,t),window.Ill.LightBoxController.amIAlone(this)&&(s("html, body").removeClass("lightBox-body"),t=parseInt(s("html").css("top")),s("html").removeClass("noscroll"),s("html,body").scrollTop(-t))}},{key:"lock",value:function(){this._locked=!0}},{key:"unlock",value:function(){this._locked=!1}},{key:"align",value:function(){this._box.css("marginTop",Math.max(0,(this._overlay.height()-this._box.outerHeight())/2)+"px"),this._overlay.scrollTop(0)}},{key:"_showBox",value:function(e,t){return this._box.fadeIn(e||500,t),!1!==this._options.autoAlign?this.align():this._box.css("marginTop",0),this._box}},{key:"_hideBox",value:function(e,t){return this._box.attr("aria-hidden",!0),this._box.fadeOut(e||500,t)}},{key:"_fireEvent",value:function(e){var t=this;this._eventHandlers[e].map(function(e){return e(t._box,t)})}},{key:"on",value:function(e,t){var n=Object.keys(this._eventHandlers);-1!==n.indexOf(e)?t&&"function"==typeof t?this._eventHandlers[e].push(t):console.error("Invalid handler for ".concat(e," event"),t):console.error("Unsupported eventName. It must be one of these: ".concat(n.join(", ")),e)}},{key:"off",value:function(e){this._eventHandlers[e]=[]}},{key:"toString",value:function(){return this._namespace}},{key:"isLocked",get:function(){return this._locked}},{key:"isVisible",get:function(){return this._visible}},{key:"overlay",get:function(){return this._overlay}},{key:"box",get:function(){return this._box}}]),r);function r(e){!function(e){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this),this._namespace="illLightBox".concat((new Date).valueOf()),this._visible=!1,this._lastFocus=null,this._docElements=null,e instanceof a?this._options=e:(console.error("LightBoxPopup options is not an instance of LightBoxOptions",e),this._options=new a),this._locked=this._options.lock,this._eventHandlers={beforeShow:[],onShow:[],beforeClose:[],onClose:[]}}function l(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}l(c.prototype,[{key:"show",value:function(){var e=new a;e.boxClass="r101-spinner--a",e.lock=!0,this.popup=new i(e),this.popup.show('<div role="dialog" aria-label="Loading"></div>')}},{key:"hide",value:function(){this.popup.close()}}]),n=c;function c(){!function(e){if(!(e instanceof c))throw new TypeError("Cannot call a class as a function")}(this),this.show()}function d(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}d(u.prototype,[{key:"lockAllExcept",value:function(e){this.lightBoxes[e]=e;var t,n={};for(t in this.lightBoxes){var a=this.lightBoxes[t];a instanceof i&&a.isVisible&&a!==e&&(n[t]=a.isLocked,a.lock())}this.states[e]=n}},{key:"amIAlone",value:function(e){for(var t in this.lightBoxes){var n=this.lightBoxes[t];if(n instanceof i&&n.isVisible&&n!==e)return!1}return!0}},{key:"revert",value:function(e){var t,n=this.states[e];for(t in n){var a=this.lightBoxes[t];a instanceof i&&!0===n[t]&&a.unlock()}delete this.lightBoxes[e],delete this.states[e]}}]),t=u;function u(){!function(e){if(!(e instanceof u))throw new TypeError("Cannot call a class as a function")}(this),this.lightBoxes={},this.states={}}window.Ill=window.Ill||{},window.Ill.LightBoxOptions=a,window.Ill.LightBoxPopup=i,window.Ill.LightBoxController=new t,window.Ill.Spinner=n}}),function(e){(jQuery.browser=jQuery.browser||{}).mobile=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}(navigator.userAgent||navigator.vendor||window.opera),function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("whatInput",[],t):"object"==typeof exports?exports.whatInput=t():e.whatInput=t()}(this,function(){return o={},n.m=a=[function(e,t){"use strict";e.exports=function(){var o="initial",i=null,n=document.documentElement,r=["input","select","textarea"],a=[],s=[16,17,18,91,93],l=[9],c={keydown:"keyboard",mousedown:"mouse",mousemove:"mouse",MSPointerDown:"pointer",MSPointerMove:"pointer",pointerdown:"pointer",pointermove:"pointer",touchstart:"touch"},e=[],d=!1,u=!1,h={x:null,y:null},t={2:"touch",3:"touch",4:"mouse"},p=!1;try{var f=Object.defineProperty({},"passive",{get:function(){p=!0}});window.addEventListener("test",null,f)}catch(e){}var m=function(){window.PointerEvent?(n.addEventListener("pointerdown",v),n.addEventListener("pointermove",g)):window.MSPointerEvent?(n.addEventListener("MSPointerDown",v),n.addEventListener("MSPointerMove",g)):(n.addEventListener("mousedown",v),n.addEventListener("mousemove",g),"ontouchstart"in window&&(n.addEventListener("touchstart",w),n.addEventListener("touchend",w))),n.addEventListener(j(),g,!!p&&{passive:!0}),n.addEventListener("keydown",v)},v=function(e){var t,n,a;d||(t=e.which,"pointer"===(n=c[e.type])&&(n=_(e)),o===n&&i===n||(a=!1,((e=document.activeElement)&&e.nodeName&&-1===r.indexOf(e.nodeName.toLowerCase())||-1!==l.indexOf(t))&&(a=!0),("touch"===n||"mouse"===n||"keyboard"===n&&t&&a&&-1===s.indexOf(t))&&(o=i=n,b())))},b=function(){n.setAttribute("data-whatinput",o),n.setAttribute("data-whatintent",o),-1===e.indexOf(o)&&(e.push(o),n.className+=" whatinput-types-"+o),y("input")},g=function(e){var t;h.x!==e.screenX||h.y!==e.screenY?(u=!1,h.x=e.screenX,h.y=e.screenY):u=!0,d||u||("pointer"===(t=c[e.type])&&(t=_(e)),i!==t&&(i=t,n.setAttribute("data-whatintent",i),y("intent")))},w=function(e){"touchstart"===e.type?(d=!1,v(e)):d=!0},y=function(e){for(var t=0,n=a.length;t<n;t++)a[t].type===e&&a[t].function.call(void 0,i)},_=function(e){return"number"==typeof e.pointerType?t[e.pointerType]:"pen"===e.pointerType?"touch":e.pointerType},j=function(){return"onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll"};return"addEventListener"in window&&Array.prototype.indexOf&&(c[j()]="mouse",m(),b()),{ask:function(e){return"loose"===e?i:o},types:function(){return e},ignoreKeys:function(e){s=e},onChange:function(e,t){a.push({function:e,type:t})}}}()}],n.c=o,n.p="",n(0);function n(e){if(o[e])return o[e].exports;var t=o[e]={exports:{},id:e,loaded:!1};return a[e].call(t.exports,t,t.exports,n),t.loaded=!0,t.exports}var a,o}),function(_){window.Ill||(window.Ill={}),window.Ill.b64EncodeUnicode=function(e){return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function(e,t){return String.fromCharCode("0x"+t)}))},_(function(){var n=_(".js-login-modal-template"),b=_(".js-sign-in--a__button"),e=null,t=!1,g=!1,a=null;function w(e){return!(!e.match(/^[_0-9a-zA-Z\.\-\+\!#\$%&\*\/=\?\^\{\|\}~]+\@[0-9a-zA-Z\.\-]+$/)||e.match(/^[^0-9a-zA-Z]|[^0-9a-zA-Z]$/)||!e.match(/.\@([0-9a-zA-Z_]{1})/)||e.match(/.\.\-.|.\-\..|.\.\../)||!e.match(/\.([a-zA-Z]{2,15})$/))}function y(){var e,t,n=!1;_(document).find('script[src^="https://www.google.com/recaptcha/api.js"]').length||(e=_(document).find(".js-sign-in--a__block-sign-in.show .js-ln-sign-in-button"),t=_(document).find(".js-sign-in--a__block-reset.show .js-ln-password-reset-button"),e.length&&(n=n||!!e.data("sitekey")),t.length&&(n=n||!!t.data("sitekey"))),n?(_(document).find(".js-sign-in--a__block-reset.show .js-ln-password-reset-button").length?_(".js-ln-password-reset-button").prop("disabled",!0):s(),(n=document.createElement("script")).src="https://www.google.com/recaptcha/api.js?onload=onLoadCaptchaSignInModal&render=explicit",document.head.appendChild(n)):(g=!0,_(".js-ln-password-reset-input").val()&&w(_(".js-ln-password-reset-input").val())||_(".js-ln-password-reset-button").prop("disabled",!0))}function o(m){var e=n.html(),t=new window.Ill.LightBoxOptions;t.boxClass="r101-sign-in--a__lightbox";var v=new window.Ill.LightBoxPopup(t);v.on("beforeShow",function(e){var t,n=e.find(".js-sign-in--a__modal-close"),a=e.find(".js-sign-in--a__block-sign-in"),o=e.find(".js-sign-in--a__block-reset"),i=e.find(".js-sign-in--a__block-sign-in-toggle"),r=e.find(".js-sign-in--a__block-reset-toggle"),s=e.find(".js-sign-in--a__block-sign-in-toggle-error").find("a"),l=e.find(".js-sign-in--a__email-input"),c=e.find(".js-sign-in--a__password-input"),d=e.find(".js-ln-password-reset-input"),u=e.find(".js-ln-password-reset-button"),h=e.find(".js-ln-password-reset-form"),p=e.find(".js-sign-in--a__toggle-password"),f=_(".js-ln-sign-in-email-dashboard");"/"===window.location.pathname&&(e=_(".js-sign-in--a__link-signup"),t=_(".js-fla-home-email"),e.on("click",function(e){e.preventDefault(),e.stopPropagation(),t.length&&setTimeout(function(){t.focus()},0),v.close()})),window.submitPasswordResetForm=function(){h.submit()},d.val()&&u.prop("disabled",!1),d.on("blur",function(){_(this).val()&&w(_(this).val())?_(this).parent().removeClass("invalid"):_(this).parent().addClass("invalid")}),d.on("input",function(){_(this).val()&&w(_(this).val())?(_(this).parent().removeClass("invalid"),u.prop("disabled",!1)):u.prop("disabled",!0)}),n.on("click",function(){b.length&&b.attr("aria-expanded",!1),v.close()}),r.on("click",function(e){e.preventDefault(),e.stopPropagation(),a.toggleClass("hide show"),o.toggleClass("show hide")}),s.add(i).on("click",function(e){e.preventDefault(),e.stopPropagation(),d.val(l.val()),l.val()&&w(l.val())&&g&&u.prop("disabled",!1),a.toggleClass("show hide"),o.toggleClass("hide show"),y()}),p.on("click",function(e){e.preventDefault(),"password"===_(this).prev().attr("type")?(_(this).prev().attr("type","text"),_(this).addClass("hide-password"),_(this).text("Hide")):(_(this).prev().attr("type","password"),_(this).removeClass("hide-password"),_(this).text("Show"))}),b.length&&b.attr("aria-expanded",!0),l.add(c).on("input",function(){_(this).val()&&_(this).parent().removeClass("invalid")}),m&&"reset"===m&&(f.length&&l.val(f.val()),i.click()),y()}),v.on("onClose",function(){b.length&&b.attr("aria-expanded",!1),v.close()}),v.show(e)}function i(e){var n=_(e),t=n.find("input[name=amember_pass]");n.find("input[name=is_modal]").length?jQuery.ajax({dataType:"json",type:"POST",data:n.serialize(),url:n.attr("action"),beforeSend:function(){s()},success:function(e){var t;e&&e.payload&&(t=_(".js-sign-in--a__block-sign-in .r101-sign-in--a__block-error"),e.payload.errorSignIn?(e.payload.captchaEnable&&(_(".js-ln-sign-in-button").data("sitekey",e.payload.captchaSiteKey),y()),n.addClass("r101-sign-in--a__form--error"),t.removeClass("hide"),t.html(e.payload.errorSignIn)):(n.removeClass("r101-sign-in--a__form--error"),t.addClass("hide"),t.html("")),e.payload.isLogin&&(e.payload.redirectUrl?window.location.href=e.payload.redirectUrl:window.location.reload()))},complete:function(){l()}}):(0===(e=n.find("input[name=amember_pass_b64]")).length&&(e=_('<input type="hidden" name="amember_pass_b64">')),e.val(window.Ill.b64EncodeUnicode(t.val())),n.append(e),t.val(""),n.submit())}function r(e){e=_(e);!!e.find("input[name=is_modal]").length?jQuery.ajax({dataType:"json",type:"POST",data:e.serialize(),url:e.attr("action"),beforeSend:function(){s()},success:function(e){var t;e&&e.payload&&(_(".js-sign-in--a__block-sign-in").toggleClass("hide show"),_(".js-sign-in--a__block-reset").toggleClass("show hide"),t=_(".js-sign-in--a__block-sign-in .r101-sign-in--a__block-error"),e.payload.errorResetPassword?(_(".js-ln-reset-password-result-text").length&&_(".js-ln-reset-password-result-text").html(e.payload.errorResetPassword),t.removeClass("hide"),t.html(e.payload.errorResetPassword)):(t.addClass("hide"),t.html("")))},complete:function(){l()}}):e.submit()}function s(){t||(e?e.show():e=new window.Ill.Spinner,t=!0)}function l(){e&&(e.hide(),t=!1)}window.onLoadCaptchaSignInModal=function(){g=!0,e&&l(),_(".js-ln-password-reset-input").val()&&w(_(".js-ln-password-reset-input").val())?_(".js-ln-password-reset-button").prop("disabled",!1):_(".js-ln-password-reset-button").prop("disabled",!0)},b.on("click",function(e){e.preventDefault(),e.stopPropagation(),o(_(this).attr("data-screen-name"))}),window.IllShowSignInForm=function(){var e=_(".js-login-modal-template"),t=_(".js-sign-in--a__button");e.length?(t.length&&t.attr("aria-expanded",!0),o()):(t=_(this).data("redirect"),window.location=t||"/member/login.php?amember_redirect_url="+window.location.pathname+window.location.search)},_(document).delegate(".js-show-sign-in-form","click touchstart",window.IllShowSignInForm),_("body").on("click",".js-ln-sign-in-button",function(e){e.preventDefault();var t=_(this).closest("form");!function(e){var t=_(e),e=t.find("input[name=amember_login]"),t=t.find("input[name=amember_pass]");e.val()?e.parent().removeClass("invalid"):e.parent().addClass("invalid");t.val()?t.parent().removeClass("invalid"):t.parent().addClass("invalid");return e.val()&&t.val()}(t)?e.stopPropagation():(e=_(this).data("sitekey"))?(s(),a?window.grecaptcha.reset(a):a=window.grecaptcha.render(document.querySelector(".js-sign-in-context-recaptcha"),{sitekey:e,size:"invisible",callback:_(this).closest("form.js-signin-form").length?submitSignInForm:submitDashbarSignInForm,isolated:!0}),window.grecaptcha.execute(a)):i(t)}),_("body").on("click",".js-ln-password-reset-button",function(e){e.preventDefault();var t=_(this).closest("form"),e=_(this).data("sitekey");e?(s(),a?window.grecaptcha.reset(a):a=window.grecaptcha.render(document.querySelector(".js-reset-password-context-recaptcha"),{sitekey:e,size:"invisible",callback:submitResetPasswordForm,isolated:!0}),window.grecaptcha.execute(a)):r(t)}),_(document).on("keypress",function(e){var t=e.target.classList,n=t.contains("js-sign-in--a__email-input")||t.contains("js-sign-in--a__password-input")||t.contains("js-ln-sign-in-login-input")||t.contains("js-ln-sign-in-password-input")||t.contains("js-ln-sign-in-button"),t=t.contains("js-ln-password-reset-input")||t.contains("js-ln-password-reset-button");13===e.which&&(n&&(e.preventDefault(),_(".js-ln-sign-in-button").click()),t&&(e.preventDefault(),_(".js-ln-password-reset-button").click()))}),window.submitDashbarSignInForm=function(){i(".js-dashbar-signin-form")},window.submitSignInForm=function(){i(".js-signin-form")},window.submitResetPasswordForm=function(){r(".js-ln-password-reset-form")}})}(jQuery),function(a){a(function(){a(".js-expiration-popup").length&&function(){var e=a(".js-expiration-popup").html(),t=new window.Ill.LightBoxOptions;t.boxClass="expiration",t.closeButton=!0;var n=new window.Ill.LightBoxPopup(t);n.on("beforeShow",function(e){e.find(".js-expiration-no-thanks").on("click",function(e){e.preventDefault(),n.close()})}),n.show(e)}()})}(jQuery),jQuery(function(o){var i,r,t=o(".js-mt-launcher:not(.js-mt-launcher-locked)"),s=t.siblings(".js-mt-badge"),l=t.data("src"),c=0;function n(){t.length&&(o(".static-b, .responsive-b").addClass("mt-launcher__noscroll"),0<parseInt(s.data("new"))&&s.data("new",0),s.hide(),t.closest(".mt-launcher").find(".mt-launcher__frame").show(),t.closest(".mt-launcher").find(".mt-launcher__frame").html('<iframe allowfullscreen allow="microphone; camera" frameborder="0" name="myteacher" src="'+t.data("src")+'"></iframe>'),t.addClass("mt-launcher__button--active"))}function e(){o(".static-b, .responsive-b").removeClass("mt-launcher__noscroll"),t.length&&(t.removeClass("mt-launcher__button--active"),t.closest(".mt-launcher").find(".mt-launcher__frame").hide(),t.closest(".mt-launcher").find(".mt-launcher__frame").html(""))}function a(){var e=Math.min(o(window).width(),320),t=Math.min(o(window).height(),530),n=o(window).height()-t,a=o(window).width()-e;0<parseInt(s.data("new"))&&s.data("new",0),s.hide();try{(i=window.open("","ill_myteacher","location=no,menubar=no,status=no,titlebar=no,toolbar=no,scrollbars=yes,width="+e+",height="+t+",top="+n+",left="+a))?("about:blank"==i.location.href&&(i.location.href=l),i.focus(),r=setInterval(function(){i&&i.closed&&(clearInterval(r),p("window"),0<c&&(v(),d()))},100)):(p("window"),d())}catch(e){console.log(e),p("window"),d()}}function d(){o(".js-mt-launcher, .js-mt-launcher-locked").show()}function u(){o(".js-mt-badge").hide(),o(".js-mt-launcher, .js-mt-launcher-locked").hide()}function h(e){try{localStorage.setItem("mtStatus",e)}catch(e){}}function p(e){try{e===localStorage.getItem("mtStatus")&&localStorage.removeItem("mtStatus")}catch(e){}}function f(){try{return localStorage.getItem("mtStatus")}catch(e){}return null}function m(){var e;o(".js-mt-iframe-is-hidden").length||++c<=0||(c=1,"iframe"===(e=f())?(d(),n()):"window"===e?(u(),a()):(v(),d()))}o(".js-open-myteacher").on("click",function(){e(),u(),a(),h("window")}),o(".js-mt-pop-out a").on("click",function(){e(),u(),a(),h("window")}),t.add(".js-launch-mt").on("click",function(){Modernizr.itsios?(e(),u(),a(),h("window")):t.hasClass("mt-launcher__button--active")?(v(),e(),p("iframe")):(i&&i.close(),d(),n(),h("iframe"))});var v=function(){t.length&&o.ajax({dataType:"json",type:"GET",data:{guidmember:t.data("guidmember"),sitename101:t.data("sitename101")},url:t.data("new")}).done(function(e){e.photo&&t.find("img").attr("src",e.photo),e.new&&0<e.new?s.data("new",e.new):s.data("new",0);e=f();"iframe"!==e&&"window"!==e&&0<parseInt(s.data("new"))&&0<c&&(s.find("span").text(s.data("new")),s.show())})};m(),window.Ill=window.Ill||{},window.Ill.mtShow=m,window.Ill.mtHide=function(){c--,e(),u()}}),jQuery(function(t){var e=t(".js-mt-launcher-locked"),n=e.siblings(".js-mt-badge");if(e.on("click",function(){var e=t(this);(e.hasClass("mt-launcher__button--active")?function(e){t(".static-b, .responsive-b").removeClass("mt-launcher__noscroll"),e.removeClass("mt-launcher__button--active"),e.closest(".mt-launcher").find(".mt-launcher__frame").hide();try{localStorage.removeItem("mtStatus")}catch(e){}}:function(e){t(".static-b, .responsive-b").addClass("mt-launcher__noscroll"),n.remove(),e.closest(".mt-launcher").find(".mt-launcher__frame").show(),e.addClass("mt-launcher__button--active");try{localStorage.setItem("mtStatus","iframe"),sessionStorage.setItem("mtOpen","1")}catch(e){}})(e)}),e.length){try{sessionStorage.getItem("mtOpen")||n.show()}catch(e){}try{"iframe"===localStorage.getItem("mtStatus")&&e.trigger("click")}catch(e){}}}),jQuery(function(n){n(".js-track-event").each(function(e,t){t=n(t).data("event");t&&(t.opt_value&&"window.location.href"===t.opt_value&&(t.opt_value=window.location.href),trackEvent(t))})}),jQuery(function(t){var e=t(".js-signin-form, .js-dashbar-signin-form");e.length&&(t("body").append('<script src="/static/js/moment.min.js"><\/script><script src="/static/js/moment-timezone-with-data-10-year-range.min.js"><\/script>'),e.on("submit",function(e){t(e.target).append('<input type="hidden" name="timezoneName" value="'+moment.tz.guess()+'">')}))}),function(n){var a={};function o(e){if(a[e])return a[e].exports;var t=a[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}o.m=n,o.c=a,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(n,a,function(e){return t[e]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s="Vjdq")}({Vjdq:function(e,t,n){"use strict";function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}n.r(t);var i=jQuery,t=(a(o.prototype,[{key:"get",value:function(e,t){return this.fetch("GET",e,t)}},{key:"post",value:function(e,t){return this.fetch("POST",e,t)}},{key:"fetch",value:function(e,t,n){var a=this,o={type:e,url:t,contentType:"application/json",dataType:"json",crossDomain:!0};return o.data="GET"===e?n:JSON.stringify(n),this.getToken().then(function(e){return o.headers={Authorization:"Bearer "+e},i.ajax(o)}).fail(function(e){if(401===e.status)return a.getToken(!0).then(function(e){return o.headers={Authorization:"Bearer "+e},i.ajax(o)})})}},{key:"getToken",value:function(e){var t=this;if(!e){if(this.token&&this.validate(this.token))return i.Deferred().resolve(this.token);e=this.readCookie();if(e&&this.validate(e))return this.token=e,i.Deferred().resolve(e)}return i.getJSON("/api/member/token").then(function(){var e=t.readCookie();return e&&t.validate(e)?t.token=e:(t.token=null,i.Deferred().reject("Unable to get access token"))})}},{key:"readCookie",value:function(){for(var e,t=document.cookie.split(";"),n=0;n<t.length;n++)if(0===(e=t[n].trim()).indexOf("ill_all101_access_token="))return e.substring("ill_all101_access_token=".length,e.length);return null}},{key:"validate",value:function(e){if(!e)return!1;e=this.getPayload(e);return!(!e||!e.exp)&&Math.floor(+new Date/1e3)<+e.exp}},{key:"getPayload",value:function(e){if(!e)return null;try{var t=e.split(".")[1].replace("-","+").replace("_","/");return JSON.parse(atob(t))}catch(e){return console.warn(e),null}}}]),o);function o(){!function(e){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),this.token=null}window.illCrossOriginAjax=new t}});